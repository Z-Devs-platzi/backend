on:
  release:
    types: [created]
  push:
    branches: [ master ]

name: Deploy to Amazon EC2

jobs:
  deploy:
    name: Deploy
    runs-on: ubuntu-latest

    steps:
    - name: Create File
      run:  cat "${{ secrets.AWS_SUPER_KEY }}" >> dummy.pem
    - name: Add Permissions
      run:  chmod 400 dummy.pem
    - name: Call File
      run:  ssh -i dummy.pem ${{ secrets.AWS_USER }}@${{ secrets.AWS_HOST }} /home/${{ secrets.AWS_PATH }}
